local Z = int(96000);
local N = 20*1000;

local measure(caption, f)
{
    elapsed := util.measure_elapsed_time(f);
    printf("%s %.06fs\n", caption, elapsed);
    return elapsed;
}

local v0 = vec(32, Z, 1.0);
local v1 = vec(32, Z);
local v2 = vec(32, Z);

noise(v1);
noise(v2);

elapsed := measure
(
    sprintf("%d times \"v0 + v1 * v2\"", N),
    [func () {
        for (i := 0; i < N; ++i)
        {
            v3 := v0 + v1 * v2;
        }
    }]
);
per := elapsed / N;
printf("%.03fus per op\n", per*1e6);
